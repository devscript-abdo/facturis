"use strict";var KTAppInvoicesCreate=function(){var e,t=function(){var t=[].slice.call(e.querySelectorAll('[data-facturis-element="items"] [data-facturis-element="item"]')),a=0,n=wNumb({decimals:2,thousand:","});t.map((function(e){var t=e.querySelector('[data-facturis-element="quantity"]'),l=e.querySelector('[data-facturis-element="price"]'),r=n.from(l.value);r=!r||r<0?0:r;var i=parseInt(t.value);i=!i||i<0?1:i,l.value=n.to(r),t.value=i,e.querySelector('[data-facturis-element="total"]').innerText=n.to(r*i),a+=r*i})),e.querySelector('[data-facturis-element="sub-total"]').innerText=n.to(a),e.querySelector('[data-facturis-element="grand-total"]').innerText=n.to(a)},a=function(){if(0===e.querySelectorAll('[data-facturis-element="items"] [data-facturis-element="item"]').length){var t=e.querySelector('[data-facturis-element="empty-template"] tr').cloneNode(!0);e.querySelector('[data-facturis-element="items"] tbody').appendChild(t)}else KTUtil.remove(e.querySelector('[data-facturis-element="items"] [data-facturis-element="empty"]'))};return{init:function(n){(e=document.querySelector("#facturis_id_invoice_form")).querySelector('[data-facturis-element="items"] [data-facturis-element="add-item"]').addEventListener("click",(function(n){n.preventDefault();var l=e.querySelector('[data-facturis-element="item-template"] tr').cloneNode(!0);e.querySelector('[data-facturis-element="items"] tbody').appendChild(l),a(),t()})),KTUtil.on(e,'[data-facturis-element="items"] [data-facturis-element="remove-item"]',"click",(function(e){e.preventDefault(),KTUtil.remove(this.closest('[data-facturis-element="item"]')),a(),t()})),KTUtil.on(e,'[data-facturis-element="items"] [data-facturis-element="quantity"], [data-facturis-element="items"] [data-facturis-element="price"]',"change",(function(e){e.preventDefault(),t()})),$(e.querySelector('[name="invoice_date"]')).flatpickr({enableTime:!1,dateFormat:"d, M Y"}),$(e.querySelector('[name="invoice_due_date"]')).flatpickr({enableTime:!1,dateFormat:"d, M Y"}),t()}}}();KTUtil.onDOMContentLoaded((function(){KTAppInvoicesCreate.init()}));